'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _rest = require('@octokit/rest');

var _rest2 = _interopRequireDefault(_rest);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class GitHub {
  constructor(authToken, requireAuth) {
    if (authToken) {
      this.token = authToken;
    } else if (process.env.GITHUB_TOKEN) {
      this.token = process.env.GITHUB_TOKEN;
    } else if (requireAuth) {
      throw 'Please set GITHUB_TOKEN in your environment to access these features';
    }
  }

  getGitHub() {
    const github = new _rest2.default({
      protocol: 'https',
      headers: {
        'user-agent': 'Electron Forge'
      }
    });
    if (this.token) {
      github.authenticate({
        type: 'token',
        token: this.token
      });
    }
    return github;
  }
}
exports.default = GitHub;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWwvZ2l0aHViLmpzIl0sIm5hbWVzIjpbIkdpdEh1YiIsImNvbnN0cnVjdG9yIiwiYXV0aFRva2VuIiwicmVxdWlyZUF1dGgiLCJ0b2tlbiIsInByb2Nlc3MiLCJlbnYiLCJHSVRIVUJfVE9LRU4iLCJnZXRHaXRIdWIiLCJnaXRodWIiLCJwcm90b2NvbCIsImhlYWRlcnMiLCJhdXRoZW50aWNhdGUiLCJ0eXBlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7Ozs7O0FBRWUsTUFBTUEsTUFBTixDQUFhO0FBQzFCQyxjQUFZQyxTQUFaLEVBQXVCQyxXQUF2QixFQUFvQztBQUNsQyxRQUFJRCxTQUFKLEVBQWU7QUFDYixXQUFLRSxLQUFMLEdBQWFGLFNBQWI7QUFDRCxLQUZELE1BRU8sSUFBSUcsUUFBUUMsR0FBUixDQUFZQyxZQUFoQixFQUE4QjtBQUNuQyxXQUFLSCxLQUFMLEdBQWFDLFFBQVFDLEdBQVIsQ0FBWUMsWUFBekI7QUFDRCxLQUZNLE1BRUEsSUFBSUosV0FBSixFQUFpQjtBQUN0QixZQUFNLHNFQUFOO0FBQ0Q7QUFDRjs7QUFFREssY0FBWTtBQUNWLFVBQU1DLFNBQVMsbUJBQWM7QUFDM0JDLGdCQUFVLE9BRGlCO0FBRTNCQyxlQUFTO0FBQ1Asc0JBQWM7QUFEUDtBQUZrQixLQUFkLENBQWY7QUFNQSxRQUFJLEtBQUtQLEtBQVQsRUFBZ0I7QUFDZEssYUFBT0csWUFBUCxDQUFvQjtBQUNsQkMsY0FBTSxPQURZO0FBRWxCVCxlQUFPLEtBQUtBO0FBRk0sT0FBcEI7QUFJRDtBQUNELFdBQU9LLE1BQVA7QUFDRDtBQXpCeUI7a0JBQVBULE0iLCJmaWxlIjoidXRpbC9naXRodWIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgR2l0SHViQVBJIGZyb20gJ0BvY3Rva2l0L3Jlc3QnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHaXRIdWIge1xuICBjb25zdHJ1Y3RvcihhdXRoVG9rZW4sIHJlcXVpcmVBdXRoKSB7XG4gICAgaWYgKGF1dGhUb2tlbikge1xuICAgICAgdGhpcy50b2tlbiA9IGF1dGhUb2tlbjtcbiAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52LkdJVEhVQl9UT0tFTikge1xuICAgICAgdGhpcy50b2tlbiA9IHByb2Nlc3MuZW52LkdJVEhVQl9UT0tFTjtcbiAgICB9IGVsc2UgaWYgKHJlcXVpcmVBdXRoKSB7XG4gICAgICB0aHJvdyAnUGxlYXNlIHNldCBHSVRIVUJfVE9LRU4gaW4geW91ciBlbnZpcm9ubWVudCB0byBhY2Nlc3MgdGhlc2UgZmVhdHVyZXMnO1xuICAgIH1cbiAgfVxuXG4gIGdldEdpdEh1YigpIHtcbiAgICBjb25zdCBnaXRodWIgPSBuZXcgR2l0SHViQVBJKHtcbiAgICAgIHByb3RvY29sOiAnaHR0cHMnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAndXNlci1hZ2VudCc6ICdFbGVjdHJvbiBGb3JnZScsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIGlmICh0aGlzLnRva2VuKSB7XG4gICAgICBnaXRodWIuYXV0aGVudGljYXRlKHtcbiAgICAgICAgdHlwZTogJ3Rva2VuJyxcbiAgICAgICAgdG9rZW46IHRoaXMudG9rZW4sXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGdpdGh1YjtcbiAgfVxufVxuIl19